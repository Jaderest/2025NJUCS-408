# 第二章 数据的表示和运算

## 目录
- [第二章 数据的表示和运算](#第二章-数据的表示和运算)
  - [目录](#目录)
    - [2.1 数制与编码](#21-数制与编码)
      - [2.1.1 进位计数制及其相互转换](#211-进位计数制及其相互转换)
      - [2.1.2 定点数的编码表示](#212-定点数的编码表示)
      - [2.1.3 整数的表示](#213-整数的表示)
      - [2.1.4 C语言整数类型及类型转换](#214-c语言整数类型及类型转换)
    - [考点\&易错点](#考点易错点)

### 2.1 数制与编码

#### 2.1.1 进位计数制及其相互转换
- 计算机内部所有信息都是二进制编码的，原因
  - 制造简单，成本低
  - 逻辑判断简单
  - 编码、运算规则简单

1. 进位计数制
2. 进制转换
   - 2 -> 8、16
     - 整数高位补0，小数低位补0
   - 10 -> 2、8、16
     - 整数除以进制取余，先余出来的为低位
     - 小数乘以进制取整，先整出来的为高位

#### 2.1.2 定点数的编码表示
1. 真值和机器数
2. 机器数的定点表示
   - 现代计算机中
     - 补码整数表示整数
     - 原码小数表示浮点数的尾数部分
     - 移码表示浮点数的阶码部分
   - 定点小数
     - 纯小数
     - **约定小数点位置在符号位之后，有效数值部分最高位之前**
     - X = x0x1...xn
       - 其中 x0 为符号位，x1...xn 为有效数值部分（尾数）
       - x1 为最高有效位
   - 定点整数
     - 纯整数
     - **约定小数点位置在有效数值部分最低位之后**
     - X = x0x1...xn
       - 其中 x0 为符号位，x1...xn 为有效数值部分（尾数）
       - xn 为最低有效位
3. 原码、补码、反码、移码（定点数的编码表示法）
   - 原码
     - 最高位表示数的符号
     - 其余位表示数的绝对值
     - 字长为n+1时，表示范围 -(2^n-1) ~ 2^n-1（关于原点对称）
       - 0的原码表示方式有两种
     - 优点
       - 与真值转换简单
       - 实现乘除简便
     - 缺点
       - 0表示不唯一
       - 实现加减复杂
   - 补码
     - 正数补码和原码相同
     - 负数补码为模与该负数绝对值之差
     - 字长n+1时，表示范围 -(2^n) ~ 2^n-1（关于原点不对称）
       - 0的补码表示方式唯一
     - 真值 -> 补码
       - 正数一样
       - 负数：取原码，符号位不变，其余位取反后加1
     - 补码 -> 真值
       - 正数一样
       - 负数：取补码，符号位不变，其余位取反后加1
     - 变形补码：
       - 双符号位的补码表示（模4补码）
       - 左符号位表示真正的符号位
       - 右符号位判断溢出
   - 反码
   - 移码（只能表示整数）
     - 真值X上加一个常数（偏置值），字长n+1时，偏置值通常为2^n-1
     - 常用于浮点数的阶码部分
     - 特点：
       - 移码中零的表示唯一
       - 真值的移码和补码仅差一个符号位，[x]_补 的符号位取反即得到 [x]_移
       - 移码全0时，真值为最小值，-2^n
       - 移码全1时，真值为最大值，2^n-1
       - 保持数据原有大小顺序
- 4种编码总结如下
  - 原码、补码、反码符号位相同，正数的机器码相同
  - 原码、反码的表示在数轴上对称，0都有两种表示
  - 补码、移码在数轴上不对称，0表示唯一，比原码、反码多表示一个数
  - 原码容易判断大小，负数的补码、反码难以直接判断
    - 对于负数，数值位部分越小，其绝对值越大，即负得越多

#### 2.1.3 整数的表示
1. 无符号整数的表示
   - 全部二进制为全为数值位，没有符号位（默认数的符号为正）
2. 有符号整数的表示
   - 符号数值化，放在有效数字前面，前面四种码都可以表示，但补码有明显优势
     - 与原码、反码相比，0的补码表示方式唯一
     - 与原码、移码相比，运算规则简单，符号可以和数值位一起参与预算
     - 与原码、反码相比，多表示一个最小负数

#### 2.1.4 C语言整数类型及类型转换
1. C语言种整型数据类型
   - short、int、long（都为补码形式存储）
   - 加上unsigned，变为无符号类型
   - char（按无符号整数解释）
2. 有符号数和无符号数的转换
   - 强制类型转换的结果：保持二进制各位位值不变，仅改变解释方式
3. 不同字长整数之间转换
   - 大字长 -> 小字长
     - 高位截断、低位直接赋值
   - 小字长 -> 大字长
     - 有符号整数使用**符号扩展**
     - 无符号整数使用**零扩展**

### 考点&易错点
- 定点小数：
  - |符号位|（小数点位置）|有效数值部分|
  - 补码表示中：
    - 正数则符号位为0，有效数值部分与原码相同
    - 负数则符号位为1，有效数值部分为原码的反码加1