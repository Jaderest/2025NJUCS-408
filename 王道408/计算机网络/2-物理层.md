# 第二章 物理层

## 目录
- [第二章 物理层](#第二章-物理层)
  - [目录](#目录)
  - [2.1 通信基础](#21-通信基础)
    - [2.1.1 基本概念](#211-基本概念)
      - [数据、信号和码元](#数据信号和码元)
      - [信源、信道与信宿](#信源信道与信宿)
      - [速率、波特与带宽](#速率波特与带宽)
    - [2.1.2 信道的极限容量](#212-信道的极限容量)
      - [奈奎斯特定理（奈氏准则）](#奈奎斯特定理奈氏准则)
      - [香农定理](#香农定理)
    - [2.1.3 编码与调制](#213-编码与调制)
      - [数字数据-\>数字信号](#数字数据-数字信号)
      - [模拟数据-\>数字信号](#模拟数据-数字信号)
      - [数字数据-\>模拟信号](#数字数据-模拟信号)
      - [模拟数据-\>模拟信号](#模拟数据-模拟信号)

## 2.1 通信基础

### 2.1.1 基本概念

#### 数据、信号和码元
- **数据**：传送信息的实体
- **信号**：数据在传输过程中存在的形式（如数据的电气、电磁表现）
  - 数据和信号都有*模拟*和*数字*两种形式
    - 模拟数据/模拟信号：取值是连续的
    - 数字数据/数字信号：取值是离散的
- 固定时长的信号波形表示k进制数，时长内的信号称为**码元**（可称为k进制码元）
  - 该时长称为 码元宽度（信号周期）
  - 1码元可携带若干比特信息量

#### 信源、信道与信宿
数据通信系统划分为三个部分：
- **信源**：产生和发送数据的源头
- **信宿**：接收数据的终点——通常是计算机或其他数字终端装置
- **信道**：信号传输的介质，双向通信的线路包含一条发送信道和一个接收信道
- 单向通信系统模型：  
  ![单向通信系统模型](./2-pic/2-1-单向通信系统模型.jpg)  
  - 噪声源：信道上噪声及系统其他各处噪声的集中表示
- 信道分类
  - 传输信号形式：模拟信道、数字信道
  - 传输介质：有线信道、无线信道
- 信号分类
  - 基带信号：信源发出的未经调制的原始电信号 —— 信道中之间传送基带信号时，称为*基带传输*
  - 宽带信号：经过调制形成的*频分复用模拟信号* —— *宽带传输*
- 数据传输方式
  - **串行传输**：数据逐比特按顺序依次传送
    - 适用于长距离通信，如计算机网络
  - **并行传输**：若干比特 多个信道 同时传输
    - 短距离，计算机内部，CPU和主存
- 按双方信息交互方式
  - 单向通信：一个方向通信，如电视广播、无线电广播 —— 一个信道
  - 半双工通信：双方发送接收，不可同时 —— 两个信道
  - 全双工通信：双方可同时发送接收 —— 两个信道

#### 速率、波特与带宽
- **速率**：单位时间内传输的数据量
  - 码元传输速率（波特率、调制速率）：每秒传输的码元数
    - 单位：波特（Baud）
    - 可多进制也可以二进制，码元速率与进制无关
  - 信息传输速率（比特率）：每秒传输的比特数
    - 单位：比特每秒（b/s）
  - 二者关系：码元携带n比特信息量
    - M Baud = M × n b/s
- 带宽：
  - 在模拟信号系统中
    - 某个信道能够传输的频率范围，最高最低频率之差
    - 单位：赫兹（Hz）
  - **在计算机网络中**
    - 为网络的通信线路所能传输数据的能力（最高数据率）
    - b/s

### 2.1.2 信道的极限容量

#### 奈奎斯特定理（奈氏准则）
- 信号中许多高频分量不能通过信道，否则传输中就会衰减，导致接收端收到的信号失去码元之间的清晰界限——**码间串扰**
- 奈奎斯特定理：理想低通（没有噪声，带宽有限）信道中，极限码元传输速率为*2W波特*，
  - W为信道带宽（Hz）
  - 若用V表示每个码元离散电平数量——V种不同的码元
  - 极限数据传输速率为 `2W log_2 V b/s`
  - 有如下结论
    - 任何信道中，码元传输速率有上限
    - 信道带宽越大，传输码元能力越强
    - 给出码元传输速率限制，但并未给出信息传输速率限制
  - 得出：要提高数据传输速率，就要设法使**每个码元携带更多比特**的信息量，采用**多元制**的调制方法

#### 香农定理
- 香农定理给出**带宽受限且有高斯噪声干扰的信道**极限数据传输速率，使用该速率传输数据时，不会产生误差
  - 信道极限传输速率 = Wlog_2(1 + S/N) b/s
  - W为信道带宽（Hz）
  - S为信号平均功率
  - N为信道内高斯噪声功率
  - S/N为信噪比
- 信噪比两种记法
  - 无单位记法：S/N —— 使用香农定理计算信道极限传输速率时，应采用无单位记法
  - 分贝记法：10log_10(S/N) dB
- 香农定理结论
  - 信噪比越大，极限传输速率越高
  - 一定传输带宽和一定信噪比，信息传输速率上限是确定的
  - 信息传输速率低于信道极限传输速率，就能找到方法实现 **无差错传输**
  - 实际信道能达到传输速率 比 极限信息传输速率 低不少

- 奈氏准则和香农定理的对比分析
  - 奈氏只考虑了**带宽** -> 极限码元传输速率
  - 香农定理考虑**带宽**、**信噪比** -> 极限信息传输速率
  - 从另一个侧面表明，码元可以携带的比特数是有限的

### 2.1.3 编码与调制
- **编码**：数据转换成数字信号的过程
- **调制**：数据转换成模拟信号的过程  
  |转换工具|数字数据|模拟数据|
  |--|--|--|
  |数字信号|数字发送器|PCM编码器|
  |模拟信号|调制器|放大器调制器|

形成如下4种编码与调制方式
#### 数字数据->数字信号
- 用于基带传输中，基本不改变数字数据信号频率下直接传输
- 具体用什么数字信号表示0/1就是**编码**（只要能有效区分0/1即可）
  - 归零（RZ）编码：每个码元中间均跳到0电平
    - 接收方根据跳变（正/负->0）调整本方时钟基准，**提供同步机制**
    - 归零占用一定带宽，传输效率受影响
  - 非归零（NRZ）编码：一个时钟全部用来传输数据
    - 编码效率最高
    - 但双方存在 **同步问题**，双方需带有时钟线
  - 反向非归零（NRZI）编码：电平跳变表示0，不变表示1
    - 通知机制
    - 能传输时钟信号，又尽量不损失系统带宽（？保持不变的时候如何确定1序列长度呢）
    - USB2.0采用NRZI编码
  - 曼彻斯特编码：每个码元中间都发生电平跳变（电平跳变传输时钟&数据信号）
    - 既作为时钟信号（用于同步）
    - 又作为数据信号，向下跳变表示1，向上跳变表示0（or相反）
    - 理解：每个码元中根据1、0有自己的形状，同时码元边界只要给它们连起来就行
  - 差分曼彻斯特编码：每个码元中间都发生电平跳变（电平跳变仅传输时钟信号）
    - 电平跳变仅表示时钟信号——**抗干扰能力强**
    - 数据表示：每个码元开始处有无电平跳变，无跳变1，跳变0
- 标准以太网使用曼彻斯特编码；差分曼彻斯特编码广泛用于宽带高速网中

#### 模拟数据->数字信号
三个步骤，采样、量化、编码（常用于音频信号编码的PCM编码）：
- 采样：对模拟信号周期性扫描，时间上连续信号->时间上离散信号
  - 采样频率 >= 模拟信号最大频率两倍（奈氏准则）
- 量化：电平幅值按一定分级标度转换为对应数值并取整
- 编码：量化得到离散整数 -> 对应二进制编码

#### 数字数据->模拟信号
- 数字数据调制技术
  - 发送端：数字信号 -> 模拟信号 —— 调制
  - 接收端：模拟信号 -> 数字信号 —— 解调
- 各种数字调制方法
  - 调幅（AM）或**幅**移键控（ASK）
    - 有载波1，无载波0
    - 容易实现；抗干扰差
  - 调频（FM）或**频**移键控（FSK）
    - 频率f1表示1，f2表示0
    - 容易实现；抗干扰能力强
  - 调相（PM）或**相**移键控（PSK）
    - 相位0表示1，相位pi表示0
    - 绝对调相方式
  - 正交幅度调制（QAM）
    - 频率相同前提，结合AM和PM，形成叠加信号
    - 波特率B，采用m个相位，每个相位n种振幅
    - 则QAM传输速率 R=Blog2(mn) b/s

#### 模拟数据->模拟信号
- 为实现传输有效性，可能需要较高频率
- 频分复用技术
- 电话局&本地交换机使用